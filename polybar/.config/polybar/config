[colors]
background = ${xrdb:color0:#222}
foreground = ${xrdb:color7:#222}
red = ${xrdb:color1:#f00}
green = ${xrdb:color2:#0f0}
yellow = ${xrdb:color3:#ffa}
blue = ${xrdb:color4:#00f}
magenta = ${xrdb:color5:#faa}
cyan = ${xrdb:color6:#aaf}
orange= ${xrdb:color9:#ffa}
violet = ${xrdb:color13:#faf}

[bar/jamesbar]
monitor = ${env:MONITOR:DP-2}
monitor-fallback = eDP-1
enable-ipc = true
height = 30
background = ${colors.background}
foreground = ${colors.foreground}
line-size = 0
padding = 1
font-0 = DejaVuSansMono:pixelsize=19;4
font-1 = DejaVuSansMono Nerd Font Mono:pixelsize=24;5
modules-left = workspaces xwindow
modules-center = time
modules-right = updates email rss bark volume backlight battery
separator = " "
tray-position = right
tray-maxsize = 32

[bar/bottombar]
monitor = ${env:MONITOR:DP-2}
monitor-fallback = eDP-1
enable-ipc = true
height = 30
background = ${colors.background}
foreground = ${colors.foreground}
line-size = 0
padding = 1
font-0 = DejaVuSansMono:pixelsize=19;4
font-1 = DejaVuSansMono Nerd Font Mono:pixelsize=24;5
modules-left = cpu ram fs card
modules-center = music
modules-right = taskwarrior
bottom = true
separator = " "

[module/updates]
type = custom/script
interval = 1800
exec = checkupdates | wc -l
format-prefix = " "

[module/bark]
type = custom/script
interval = 300
exec = bark list | wc -l
format-prefix = " "
click-left = bark open 1

[module/rss]
type = custom/script
interval = 300
exec = curl -sL "https://ttrss.jamesbvaughan.com/backend.php?op=getUnread&login=james"
format-prefix = " "
click-left = urxvt -e newsboat

[module/taskwarrior]
type = custom/script
interval = 30
exec = ~/.config/polybar/task_polybar.sh
format-prefix = " "

[module/email]
type = custom/script
interval = 300
format-prefix = " "
exec = ~/.config/polybar/gmail/launch.py
click-left = urxvt -e neomutt

[module/workspaces]
type = internal/xworkspaces
format-underline = ${colors.magenta}
label-active = "  "
label-empty = "  "
label-occupied = "  "
label-urgent = "  "

[module/xwindow]
type = internal/xwindow
format-underline = ${colors.violet}
label = %title:0:62:…%

[module/music]
type = custom/script
format-underline = ${colors.violet}
exec = ~/.config/polybar/player-mpris-tail.py
tail = true
click-left = ~/.config/polybar/player-ctrl.sh play-pause
click-right = urxvt -e ncmpcpp

[module/cpu]
type = internal/cpu
interval = 3
format-underline = ${colors.red}
label = " %percentage:2%%"

[module/ram]
type = internal/memory
interval = 3
format-underline = ${colors.green}
label = " %percentage_used:2%%"

[module/fs]
type = internal/fs
mount-0 = /
label-mounted = " %percentage_used:2%%"

[module/card]
type = internal/fs
mount-0 = /media/james/card
label-mounted = " %percentage_used:2%%"

[module/volume]
type = custom/script
format-underline = ${colors.magenta}
exec = ~/.config/polybar/pulseaudio-tail.sh
tail = true
click-right = exec pavucontrol &
click-left = ~/.config/polybar/pulseaudio-tail.sh --mute
scroll-up = ~/.config/polybar/pulseaudio-tail.sh --down
scroll-down = ~/.config/polybar/pulseaudio-tail.sh --up

[module/backlight]
type = internal/backlight
card = intel_backlight
format-underline = ${colors.cyan}
label = " %percentage:2%%"

[module/battery]
type = internal/battery
format-discharging-underline = ${colors.orange}
format-charging-underline = ${self.format-discharging-underline}
format-discharging = <ramp-capacity> <label-discharging>
format-charging = <animation-charging> <label-charging>
label-discharging = "%percentage:2%%"
label-charging = ${self.label-discharging}
label-full = " %percentage:2%%"
ramp-capacity-0 = ""
ramp-capacity-1 = ""
ramp-capacity-2 = ""
ramp-capacity-3 = ""
ramp-capacity-4 = ""
animation-charging-0 = ${self.ramp-capacity-0}
animation-charging-1 = ${self.ramp-capacity-1}
animation-charging-2 = ${self.ramp-capacity-2}
animation-charging-3 = ${self.ramp-capacity-3}
animation-charging-4 = ${self.ramp-capacity-4}

[module/time]
type = internal/date
interval = 5
format-underline = ${colors.blue}
time = %H:%M
date = %Y-%m-%d%
label = %date% %time%

[module/kdeconnect]
type = custom/script
exec = ~/.config/polybar/kdeconnect.sh
exec-if = pgrep -x kdeconnectd
interval = 5

; vim:ft=dosini
