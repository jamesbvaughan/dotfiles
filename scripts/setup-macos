#!/bin/bash

# This script configures MacOS how I like it.
# It's meant to be idempotent so that it can safely be re-run at any time.

set -euo pipefail

pushd ~/.dotfiles

which -s brew || curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh

export HOMEBREW_NO_ENV_HINTS=true
brew install --quiet \
	bat \
	coreutils \
	fd \
	fzf \
	neovim \
  docker-compose \
	rg \
	zsh \
	exa \
  highlight \
	htop \
	hub \
  git \
	koekeishiya/formulae/yabai \
  lua-language-server \
  luarocks \
	markdownlint-cli \
	nodenv \
  prettier \
	rbenv \
	shellcheck \
	skhd \
	starship \
	stow \
	stylua \
  tldr \
	tmux \
	tree \
	yamllint

brew install --quiet --cask \
  alfred \
  docker
#   # Add this back once the cask is > v3.5
#   # iterm2

stow \
	alfred \
	git \
	hushlogin \
	iterm2 \
	luacheck \
	neovim \
	skhd \
	tmux \
	yabai \
	zsh

test -d ~/.oh-my-zsh || sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

popd

echo 'Finished.'
